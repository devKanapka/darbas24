{% include "header.html" %}
{% block content %}
<div class="container">
<div class="row">
  <div class="col-12">
      <div class="card card-margin">
        <div class="card-body">
            <div class="row search-body">
              <div class="col-lg-12">
                  <div class="search-result">
                    <div class="result-header">
                        <div id="container">
                          <canvas id="offers-count-by-category-chart" data-url="{% url 'offers-count-by-category-chart' %}"></canvas>
                        </div>
                        <div id="container">
                          <canvas id="job-offers-by-salary-range-chart" data-url="{% url 'job-offers-by-salary-range-chart' %}"></canvas>
                        </div>
                        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
                        <script>
                          $(function () {

                            var $offersCountByCategoryChart = $("#offers-count-by-category-chart");
                            $.ajax({
                              url: $offersCountByCategoryChart.data("url"),
                              success: function (data) {

                                var ctx = $offersCountByCategoryChart[0].getContext("2d");

                                new Chart(ctx, {
                                  type: 'bar',
                                  data: {
                                    labels: data.labels,
                                    datasets: [{
                                      label: 'Count',
                                      backgroundColor: data.colors,
                                      data: data.data
                                    }]
                                  },
                                  options: {
                                    responsive: true,
                                    legend: {
                                      display: false,
                                    },
                                    title: {
                                      display: true,
                                      text: 'Job Offers Count by Category'
                                    },
                                    indexAxis: 'y',
                                  }
                                });

                              }
                            });

                          });
                        </script>
                        <script>
                          $(function () {

                            var $offersBySalaryRangeChart = $("#job-offers-by-salary-range-chart");
                            $.ajax({
                              url: $offersBySalaryRangeChart.data("url"),
                              success: function (data) {

                                var ctx = $offersBySalaryRangeChart[0].getContext("2d");

                                new Chart(ctx, {
                                  type: 'bar',
                                  data: {
                                    labels: data.labels,
                                    datasets: [{
                                      label: 'Count',
                                      backgroundColor: data.colors,
                                      data: data.data
                                    }]
                                  },
                                  options: {
                                    responsive: true,
                                    legend: {
                                      display: false,
                                    },
                                    title: {
                                      display: true,
                                      text: 'Job Offers by Salary Range (Neto)'
                                    },
                                    indexAxis: 'y',
                                  }
                                });

                              }
                            });

                          });
                        </script>
                    </div>
                  </div>
              </div>
            </div>
        </div>
      </div>
  </div>
</div>
{% endblock %}
{% include "footer.html" %}
